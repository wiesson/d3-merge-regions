<!DOCTYPE html>
<meta charset="utf-8">
<style>

    .regions {
        fill: #ccc;
    }

    .region-boundary {
        fill: #ccc;
        stroke: #ccc;
    }

    .regions.selected {
        fill: orange;
        stroke: orange;
    }

    .regions.selected:hover {
        fill: lightblue;
        stroke: lightblue;
    }

</style>
<body>
<script src="//d3js.org/d3.v3.min.js"></script>
<script src="//d3js.org/topojson.v1.min.js"></script>
<script>

    var w = window, d = document, e = d.documentElement, g = d.getElementsByTagName('body')[0], x = w.innerWidth || e.clientWidth || g.clientWidth, y = w.innerHeight || e.clientHeight || g.clientHeight;
    var width = x - 100;
    height = y - 100;

    var projection = d3.geo.mercator()
            .scale((width + 1) / 2 / Math.PI)
            .translate([width / 2, height / 2])
            .precision(.1);

    var path = d3.geo.path()
            .projection(projection);

    var svg = d3.select("body").append("svg")
            .attr("id", "baseSvg")
            .attr("width", width)
            .attr("height", height);

    var WE = d3.set(["BEL", "CHE", "DEU", "ESP", "FRA", "GBR", "IRL", "ITA", "LUX", "NLD", "PRT"]);

    var NE = d3.set(["DNK", "FIN", "NOR", "SWE"]);

    d3.json("lib/world.json", function (error, world) {
        if (error) throw error;

        console.log(world);

        svg.append("path")
                .datum(topojson.feature(world, world.objects.subunits))
                .attr("class", "regions")
                .attr("d", path);

        svg.append("path")
                .datum(topojson.mesh(world, world.objects.subunits, function (a, b) {
                    return a !== b;
                }))
                .attr("class", "region-boundary")
                .attr("d", path);

        svg.append("path")
                .datum(topojson.merge(world, world.objects.subunits.geometries.filter(function (d) {
                    return WE.has(d.id);
                })))
                .attr("class", "regions selected")
                .attr("d", path);

        svg.append("path")
                .datum(topojson.merge(world, world.objects.subunits.geometries.filter(function (d) {
                    return NE.has(d.id);
                })))
                .attr("class", "regions selected")
                .attr("d", path);
    });

    d3.select(self.frameElement).style("height", height + "px");

</script>